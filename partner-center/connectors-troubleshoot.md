---
title: 共同販売紹介コネクタのトラブルシューティング
ms.topic: how-to
ms.date: 09/21/2020
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
description: 共同販売コネクタのトラブルシューティング方法に関する FAQ。
author: sroy
ms.author: sroy
ms.localizationpriority: medium
ms.openlocfilehash: ad09d7c805ce5a1138d7546fd041ae1eda77b00c
ms.sourcegitcommit: 51e3c912eba8cfa72733206c0fee22386fbc34aa
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/22/2020
ms.locfileid: "91002971"
---
# <a name="troubleshoot-co-sell-referrals-connectors"></a>共同販売紹介コネクタのトラブルシューティング

**適用対象:**

- パートナー センター
- Dynamics 365 CRM
- Salesforce CRM

**適切なロール**

- 紹介管理者
- CRM のシステム管理者またはシステムカスタマイザー

 ## <a name="questions-and-answers-about-pre-requisites"></a>前提条件に関する質問と回答

1. お使いの環境に対して試用版の共同販売紹介コネクタソリューションを使用できますか。

テスト/ステージング環境を使用している場合は、試用版ソリューションを選択できます。 このコネクタの有料バージョンは、AppSource で米国ドルの 15/月でご利用いただけます。 有料接続では、1日あたり10K の API 呼び出しを取得します。 コネクタは、パートナーセンターの参照 Api の上にあるラッパーです。 パートナーセンターまたは CRM 側の営業案件で、コネクタソリューションが **作成** または **更新** イベントに対して実行されるたびに、API 呼び出しが行われます。

2. CRM 環境でセクションを作成するにはどのような役割が必要ですか。

システム管理者またはシステムカスタマイザーのユーザーは、すべてのユーザーに変更を適用できます。 ただし、すべてのアプリユーザーがシステムをカスタマイズしたり、カスタマイズの一部を他のユーザーと共有したりすることもできます。 

3. パートナー販売者は、パートナーセンターで作業するために特別な役割を必要としていますか。
 
パートナーの販売元には、"紹介管理者" ロールが割り当てられている必要があります。 詳細については、次の「アクセス許可の概要」を参照してください (作成-ユーザーアカウントと-設定-アクセス許可)。

4. CRM 環境で最初に設定する必要があるフィールドは何ですか。 

•お客様の地域に合った通貨を使用していること、および CRM 環境に正確に対応していることを確認してください。 • Crm ユーザーとして CRM 環境に販売チームが一覧表示されている必要があります。

5.  環境の作成を自動化するために必要な前提条件は何ですか。

電力自動化環境を使用するには、次のものが必要です。

- Power 自動ライセンス認証が必要です。
- 少なくとも 1 GB のストレージが必要です。

6.  Salesforce コネクタソリューションを使用するには、Dynamics 365 サブスクリプションが必要ですか?

Salesforce コネクタソリューションの種類は "Dynamics Flow" で、他の CRM システムとの同期をサポートしています。 このソリューションでは、Dynamics 365 インスタンスまたはサブスクリプションが必要ではありません。 Salesforce ソリューションをインストールするときに、会社内の既存の CD 環境を含むドロップダウンが表示されることがあります。 その環境を選択する必要があります。 さらに、"サインインしたユーザーに接続された Dynamics 365 組織が見つかりませんでした" というエラーが表示された場合は、コネクタ用に新しい環境を作成する必要があります。

## <a name="questions-and-answers-about-configuration"></a>構成に関する質問と回答

1. パワー自動化プラットフォームでフローをアクティブ化しているときに、次のエラーが発生した場合はどうすればよいですか?

エラー: Azure Resource Manager への要求が失敗しました。エラー: ' {"エラー": {"code": "WorkflowTriggerNotFound"、"message": "ワークフロー ' e14d00f1-1fdf-4b1b-aaac-54a5064093d3 ' トリガー ' manual ' が見つかりませんでした。"}} '。 

次のトラブルシューティング手順に従います。

- CD 接続を削除してから、CD 接続を再作成してください。
- 子フローをオフまたはオンにする 
- ソリューションを削除してから、ソリューションを再インストールしてください。 

2.  Power オートメーションプラットフォームでパートナーセンターコネクタを追加するときに、次のエラーが発生した場合はどうすればよいですか。

:::image type="content" source="images/cosellconnectors/failure.png" alt-text="サインインが必要なエラーメッセージ":::

このトラブルシューティングの手順に従います。

- パートナーセンターのサインインを使用して、フロー環境に1回サインインします (flow.microsoft.com)。


3. Power オートメーションプラットフォームでパートナーセンターから CRM へのフローをアクティブにするときに、次のエラーが発生した場合はどうすればよいですか?
 
:::image type="content" source="images/cosellconnectors/powererror.png" alt-text="更新が必要なエラーメッセージ":::

次のトラブルシューティング手順に従います。

- パートナーセンターを CRM フローにアクティブ化する前に、まず次の2つの子フローをアクティブ化します。
      - パートナーセンターから CRM ヘルパーへ (Insider Preview)
      - パートナーセンターの Microsoft 共同販売の CRM の参照の更新 (Insider Preview)

4. フローを編集しようとすると、フローに接続を追加できない場合はどうすればよいですか。

フローの実行中にフローへの接続を追加し、各フローに個別に追加します。  フローの編集中に接続を追加するダイアログボックスが自動的に開かない場合は、フローの各ステップとサブステップを編集して、接続を追加できます。

- 各フローを選択し、個別に編集します。
- フロー内のすべてのステップを展開する 

:::image type="content" source="images/cosellconnectors/flowsteps.png" alt-text="接続が必要な手順":::

- 接続の関連付けと接続の追加を求める警告アイコンが表示される手順を選択します。 

:::image type="content" source="images/cosellconnectors/editflow.png" alt-text="フローステップをステップごとに編集":::


5. 共同販売参照コネクタソリューションのフローがアクティブになっていない場合 (有効になっている場合)

    A. Power の自動化では、次の順序でフローを編集し、それぞれの接続を使用するように更新する必要があります。

    - パートナーセンターの Webhook の登録 (Insider Preview)
    - パートナーセンターへの共同販売参照の作成-Salesforce (Insider Preview)
    - パートナーセンター: Microsoft 共同での Salesforce の参照の更新 (Insider Preview)
    - パートナーセンターから Salesforce へ (Insider Preview)
    - Salesforce からパートナーセンターへ (Insider Preview)
    - パートナーセンターへの Salesforce の営業案件 (Insider Preview)
    - パートナーセンターへの Salesforce Microsoft ソリューション (Insider Preview)

    B. 各フローに対して、[ **ユーザーのみ実行** ] オプションを選択します。 [**実行専用ユーザーによって提供される**のではなく、**接続を使用する**] を選択します。  

:::image type="content" source="images/cosellconnectors/runonly.png" alt-text="フローをアクティブ化するには":::

C. 以下のフローフローをアクティブにします。

- パートナーセンター: Microsoft 共同での Salesforce の参照の更新 (Insider Preview)

- Salesforce からパートナーセンターへ (Insider Preview)


D. 残りのすべてのフローをアクティブ化します。

E. Flow パートナーセンターの Webhook 登録で、[ **実行**] を選択します。 **パートナーセンター**の最初のアクションから Salesforce flow に**http url**を指定します。 [ **登録するイベント** ] の下にある4つのオプションをすべて選択し、[上書き] で [ **はい]** を選択します。

## <a name="questions-and-answers-about-runmaintenance"></a>実行/メンテナンスに関する質問と回答

1. 電源自動化フロー実行中にエラーが発生した場合のトラブルシューティング方法

フローが期待どおりに実行されるようにし、実行中のエラーをトラブルシューティングするには、 [フローエラーの修正](/power-automate/fix-flow-failures)に関する記述を参照してください。

2. パートナーセンターまたは CRM 環境で適切に同期されていない参照が表示される場合は、どうすればよいですか。
 
参照同期の状態を確認するには、[ **監査**] を選択します。 

:::image type="content" source="images/cosellconnectors/synch.png" alt-text="参照を同期する方法":::

次の条件が満たされていることを確認します。

- ソリューション id は、営業案件の一部として提供されます。

- 2文字の国コードが必要です。

- 営業案件について Microsoft からのヘルプが選択されている場合は、顧客の連絡先情報が必要です。

3. 参照を双方向に同期させない条件の下

以下のことを確認してください。

- パートナーの販売者は、CRM セクションで **パートナーセンターオプションとの同期** を有効にしていることを確認する必要があります。

:::image type="content" source="images/cosellconnectors/enablesynch.png" alt-text="同期が有効になっていることを確認する":::

- 販売元は、潜在顧客を限定するときに収益と終了日を提供する必要があります。

- CRM id が共同販売の機会の作成または更新に指定されていて、その id を持つ潜在顧客が CRM で見つからない場合は、その営業案件の update または create は無視されます。

- [紹介通貨] フィールドが Salesforce 環境で構成されていることを確認します。 

4. コネクタが切断され、参照の同期が失われた場合はどうすればよいですか。 

次に、試してみることのできるオプションをいくつか示します。

- パートナーセンターのユーザーに対して、ユーザー名またはパスワードの有効期限が切れているかどうかを確認します。

- 同期されていない営業案件にアクセスし、マイナー更新を行い、参照が同期されているかどうかを確認できます。

- フローが実行されて失敗した場合は、フローを選択し、失敗した実行を再送信します。

5. アクセス拒否エラーが発生した場合はどうすればよいですか?

適切なロールが存在することを確認する

- パートナーセンターの販売者の紹介管理者ロール 
 
- CRM インスタンスのシステム管理者ロールまたはシステムカスタマイザーロール

- フローアカウントのユーザーログが https://flow.microsoft.com 少なくとも事前に1回は自動で実行されていることを確認します。

6. 共同販売の機会の作成中に **顧客アカウントの国コード** が不足していることがわかった場合は、どうすればよいでしょうか。

ISO の2文字の国コードを CRM の顧客アカウントに追加する必要があります。

7. 共同販売の機会を作成するときに **ソリューション Id が必要** であるというエラーが表示された場合はどうすればよいですか。

共同販売の紹介を作成するには、Microsoft 共同販売の準備ができているソリューションが必要です。 

8. フローエラーが発生していなくても CRM に同期されていない共同販売機会がパートナーセンターで作成されている場合は、次のことを行う必要があります。

次の手順を実行します。

- パートナーセンターで新しい共同販売取引を作成した後、パートナーセンターから Dynamics 365 へのフローが呼び出されるかどうかを確認します (複数回呼び出される可能性があります)。

- フローが呼び出された場合は、呼び出されたすべてのフローを確認し、CRM を更新するフロー実行を特定します。 アクションに従って操作を実行し、CRM が更新されたか、または問題が発生したかどうかを確認できます。

- パートナーセンターで *新しい商談** を確認し、CRM id が設定されているかどうかを確認します。

- パートナーセンターで、取引が誤って "勝ち" または "Lost" として閉じられていないことを確認します。

## <a name="next-steps"></a>次のステップ

- [見込み客を管理する](manage-leads.md)
 
- [共同販売の機会を管理する](manage-co-sell-opportunities.md)