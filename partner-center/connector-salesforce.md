---
title: Salesforce CRM パートナーセンターの共同販売コネクタ
ms.topic: article
ms.date: 05/17/2020
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
description: パートナーセンターでの紹介を Salesforce CRM と同期する
author: LauraBrenner
ms.author: labrenne
ms.localizationpriority: medium
ms.openlocfilehash: e51ddc8ec3ea568a20404801802548f79cae43d0
ms.sourcegitcommit: e0a1b4506840486f4bb82620051e0f6a5e81662a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/18/2020
ms.locfileid: "84991620"
---
# <a name="co-sell-connector-for-salesforce-crm---overview"></a>Salesforce CRM のための共同販売コネクタ - 概要

### <a name="appropriate-roles"></a>適切なロール

- 紹介管理者
- CRM のシステム管理者またはシステムカスタマイザー

パートナーセンターの共同販売コネクタを使用すると、販売元は CRM システム内から Microsoft と共同で販売することができます。 パートナーセンターを使用して共同販売取引を管理するためのトレーニングを行う必要はありません。 共同販売コネクタを使用して、Microsoft の販売者に連絡したり、Microsoft 販売者からの推薦を受け取ったり、紹介を受け入れたり拒否したりすることができます。また、商談の価値や決算日などの商談データを変更することもできます。  また、これらの共同販売取引に関するマイクロソフト販売者からの更新を受け取ることもできます。 パートナーセンターではなく、選択した CRM 内での作業中に、すべての紹介作業を行うことができます。 

このソリューションは、Microsoft のパワー自動化ソリューションに基づいており、パートナーセンター Api を使用しています。

## <a name="before-you-install---pre-requisites"></a>をインストールする前に-前提条件

|**トピック**   |**詳細**   |**リンク**   |
|--------------|--------------------|------|
|Microsoft Partner Network ID |有効な MPN ID が必要です|[MPN](https://partner.microsoft.com/)に参加するには|
|共同販売の準備完了|お客様の IP/サービスソリューションは、共同販売の準備ができている必要があります。|[Microsoft との販売](https://partner.microsoft.com/membership/sell-with-microsoft)| 
|パートナー センター アカウント|パートナーセンターのテナントに関連付けられている MPN ID は、共同販売ソリューションに関連付けられている MPN ID と同じである必要があります。 コネクタをデプロイする前に、パートナーセンターポータルで共同販売の紹介を確認できることを確認します。|[アカウントの管理](create-user-accounts-and-set-permissions.md)|
|パートナー センターのユーザー ロール|コネクタをインストールして使用する従業員は、参照管理者である必要があります|[ユーザー ロールとアクセス許可の割り当て](create-user-accounts-and-set-permissions.md)|
|Salesforce CRM|CRM ユーザーロールは、システム管理者またはシステムカスタマイザーです。|[Salesforce CRM でロールを割り当てる](https://docs.microsoft.com/SalesforceCRM/customerengagement/on-premises/customize/privileges-required-customization)|
|パワー自動化フローアカウント|CRM システム管理者またはシステムカスタマイザー用のアクティブな[電源自動化](https://flow.microsoft.com)アカウント。 そのユーザーは、インストールの前に少なくとも1回、[電源の自動](https://flow.microsoft.com)登録を行う必要があります。|

## <a name="install-partner-center-referrals-synchronization-for-salesforce-crm"></a>Salesforce CRM のパートナーセンターの紹介同期をインストールする

1. [[パワー自動化](https://flow.microsoft.com)] にアクセスし、右上隅にある [**環境**] を選択します。 これにより、使用可能な CRM インスタンスが表示されます。

2. 右上隅にあるドロップダウンから適切な CRM インスタンスを選択します。

3. 左側のナビゲーションバーで [**ソリューション**] を選択します。

4. 上部のメニューの [ **AppSource を開く**] リンクをクリックします。

   :::image type="content" source="images/cosellconnectors/openappsource.png" alt-text="AppSource を開く":::

5. ポップアップ画面で、 **Salesforce のパートナーセンターの紹介コネクタ**を検索します。  

   :::image type="content" source="images/salesforce/salesforce1.png" alt-text="Salesforce":::

6. [**今すぐ入手**する] ボタンをクリックし、[**続行**] をクリックします。

7. これにより、Salesforce CRM 環境を選択してアプリケーションをインストールできるページが開きます。  使用条件に同意します。

   :::image type="content" source="images/salesforce/available-crm.png" alt-text="使用可能な CRMS":::

8. その後、[**ソリューションの管理**] ページに移動します。  ページの下部にある矢印ボタンを使用して、[パートナーセンターの紹介] に移動します。 [パートナーセンターの紹介] ソリューションの横に、[**インストールのスケジュール**] が表示されます。 インストールには10-15 分かかります。

9. インストールが完了したら、[Power の[自動化](https://flow.microsoft.com)] に戻り、左側のナビゲーション領域から [**ソリューション**] を選択します。 **Salesforce のパートナーセンターの紹介同期**は、[ソリューション] の一覧で確認できます。

10. **Salesforce のパートナーセンター紹介同期**を選択します。 次の電源の自動化フローとエンティティを利用できます。

    :::image type="content" source="images/salesforce/salesforce-flows.png" alt-text="Salesforce フロー":::

## <a name="best-practice-test-before-you-go-live"></a>ベストプラクティス: 運用前にテストする

運用環境でパワー自動化ソリューションをインストール、構成、およびカスタマイズする前に、必ずステージング CRM インスタンスでソリューションをテストしてください。

- ステージング環境/CRM インスタンスに Microsoft Power 自動ソリューションをインストールします。

- ソリューションのコピーを作成し、構成を実行して、ステージング環境でフローのカスタマイズを自動化します。

- ステージング/CRM インスタンスでソリューションをテストします。

- 成功した場合は、運用インスタンスにマネージドソリューションとしてインポートします。

## <a name="configure-the-solution"></a>ソリューションを構成する

1. CRM インスタンスにソリューションをインストールしたら、[ [Power の自動化](https://flow.microsoft.com/)] に戻ります。

2. 右上隅にある [**環境**] ドロップダウンで、パワー自動化ソリューションをインストールした CRM インスタンスを選択します。

3. 次の3つのユーザーアカウントを関連付ける接続を作成する必要があります。

   - 参照管理者の資格情報を持つパートナーセンターのユーザー
   - パートナー センターのイベント
   - Power を使用した CRM 管理ソリューションのフローが自動化されます。

   1. 左側のナビゲーションバーから [**接続**] を選択し、一覧から "パートナーセンターの紹介" ソリューションを選択します。

   2. [**接続の作成**] をクリックして接続を作成します。

       :::image type="content" source="images/cosellconnectors/createconnection.png" alt-text="接続を作成する":::

   3. 右上隅の検索バーで、**パートナーセンターの参照 (プレビュー)** を検索します。

   4. 参照管理者の資格情報ロールを使用して、パートナーセンターユーザーの接続を作成します。

   5. 次に、パートナーセンターのユーザーに、参照管理者の資格情報を使用してパートナーセンターのイベント接続を作成します。

   6. CRM 管理者ユーザーの Common Data Service (現在の環境) の接続を作成します。

4. 電源自動化フローを接続に関連付けるには、各パワー自動化フローを編集して、Common Data Service とパートナーセンターの紹介に接続します。 変更を保存します。

5. パワー自動化フローを**有効に**します。

## <a name="use-webhook-apis-to-register-for-resource-change-events"></a>Webhook Api を使用してリソース変更イベントに登録する

パートナーセンターの Webhook Api を使用すると、リソース変更イベントに登録できます。 これらの変更イベントは、HTTP 投稿として url に送信されます。

1. Url を登録するには、**パートナーセンターの Webhook 登録 (Insider Preview)** パワー自動化フローを選択します。

2. 接続の追加 (a.)参照管理者の資格情報を持つパートナーセンターのユーザー (b)次の強調表示されているパートナーセンターのイベント

   :::image type="content" source="images/cosellconnectors/triggerflow.png" alt-text="トリガー":::

3. これらの更新を行うと、次のように表示されます。

   :::image type="content" source="images/cosellconnectors/webhook1.png" alt-text="Webhook":::

4. 変更内容を保存し、[**有効にする**] を選択します。

   パートナーセンターの webhook でイベントの変更をリッスンできるようにするには、次の手順を実行します。

5. [**パートナーセンター] を**選択します。

6. [**編集**] アイコンを選択し、[ **HTTP 要求の受信時**] を選択します。

7. **コピー**アイコンを選択して、指定された HTTP POST URL をコピーします。

   :::image type="content" source="images/salesforce/copy-url.png" alt-text="URL のコピー":::

8. 次に、"パートナーセンターの Webhook の登録 (Insider Preview)" パワー自動化フローを選択し、[**実行**] を選択します。

9. 右側のウィンドウで [実行フロー] ウィンドウが開いていることを確認し、[**続行**] をクリックします。

10. 次の詳細を入力します。

    1. **Http トリガーエンドポイント**: 前の手順からコピーされた URL

    2. **登録するイベント**: "紹介-作成" と "参照-更新"

    3. **既存のトリガーエンドポイントがある場合は上書き**します (存在する場合は既存のエンドポイントを上書きします)。

11. [**実行**] を選択し、[完了] を選択し**ます。**

Webhook は、イベントの作成と更新をリッスンできるようになりました。

## <a name="customize-synchronization-steps"></a>同期手順のカスタマイズ

パートナーセンターと CRM システムの間で共同販売参照が同期されると、パートナーセンター PC で同期されるフィールドがここに表示されます。

多くの場合、CRM システムは高度にカスタマイズされています。 パワー自動化フローをカスタマイズできます。 フィールドマッピングガイドに従って、必要に応じて、パワー自動化フローの手順に適切な変更を加えます。  Microsoft パートナーセンターから CRM へのマッピングが提供されますが、CRM 環境に基づいて、フィールドをさらにカスタマイズすることもできます。

各パワー自動化フローの複数の手順は、ニーズに応じてカスタマイズできます。 使用可能なカスタマイズの例を次に示します。

1. パートナーセンターで作成または更新イベントのフィールドを CRM の参照同期にカスタマイズするには、次のようにします。

   1. [パートナーセンター] を選択します。

   2. [**編集**] を選択して、パワー自動化フローを編集またはカスタマイズします。

   3. 選択 **(スコープ) 潜在顧客または営業案件を同期**します。

2. 作成イベントの CRM フィールドマッピングをカスタマイズするには、[**新しい共有の営業案件]、[**] の順に選択します。 [**はい] の場合**はサブステップを選択し、 **CRM で [新しい営業案件の作成**] を展開します。 このセクションでマッピングを編集するには、[フィールドマッピングガイド] を使用します。

   1. 更新イベントの CRM フィールドマッピングをカスタマイズするには、[(スコープ) 潜在顧客または営業案件を同期する] ステップをクリックします。

   2. **営業案件の更新である場合は、** を選択します。 [サブステップ**if yes]** を選択し、次に**パートナーセンターと CRM の営業案件オブジェクト間の差異がある場合**は、を展開します。  

   3. **既存の営業案件を更新**する場合は、[**はい]** を選択します。

3. 更新イベントの CRM から PC への参照同期のフィールドをカスタマイズするには、次のようにします。

   1. [**編集**] を選択して、パワー自動化フローを編集またはカスタマイズします。

   2. [ **(スコープ)] を選択して、営業案件を同期**します。

   3. 更新イベントの CRM フィールドマッピング (フィールドマッピングガイドに基づく) をカスタマイズする場合は、**パートナーセンターと CRM の潜在顧客オブジェクトが異なるかどうか**を選択してから、を選択します。

   4. [**はい] の場合**はサブステップを選択し、[**営業案件データを使用して紹介を更新する**] ステップを展開します。

   このセクションのマッピングは、フィールドマッピングガイドに基づいて編集できます。

4. Create events の CRM to PC 参照同期のフィールドをカスタマイズするには

   1. [**編集**] を選択して、パワー自動化フローを編集またはカスタマイズします。

   2. **参照の同期を選択 (スコープ) します。**

   3. [イベントの作成] で (フィールドマッピングガイドに基づいて) CRM フィールドマッピングをカスタマイズする場合は、[ **Microsoft の紹介を作成する**] を選択します。

このセクションのマッピングは、フィールドマッピングガイドに基づいて編集できます。

## <a name="create-separate-section-in-salesforce-crm-opportunity-layout"></a>Salesforce CRM 営業案件レイアウトで別のセクションを作成する

パートナーセンターと Salesforce CRM 間で推薦を同期するには、Power 区別のソリューションで、Microsoft 固有の紹介フィールドを明確にする必要があります。 これにより、販売者チームは、共同販売のために Microsoft と共有する参照を決定することができます。

Salesforce CRM**営業案件**エンティティのパートナーセンターの紹介同期の一部として、一連のカスタムフィールドを使用できます。 CRM 管理者ユーザーは、**営業案件**のカスタムフィールドを使用して、別の crm セクションを作成する必要があります。
Salesforce CRM 管理者ユーザーは、別の CRM セクションを作成する必要があります。

次のカスタムフィールドは、CRM セクションの一部にする必要があります。

- **パートナーセンターとの同期**: 営業案件を Microsoft パートナーセンターと同期するかどうか

- **参照識別子**: Microsoft パートナーセンターの紹介の読み取り専用識別子フィールド

- **紹介リンク**: Microsoft パートナーセンターでの紹介への読み取り専用リンク

- **Microsoft ではどのように役立つでしょうか。** 紹介のために Microsoft が必要とするヘルプ

- **製品**: この営業案件に関連付けられている製品の一覧

- **監査**: Microsoft パートナーセンターの紹介と同期するための読み取り専用の監査証跡

### <a name="set-up-fields-and-relationships"></a>フィールドとリレーションシップの設定

1. Salesforce アカウントにサインインし、[**営業案件**] にアクセスします。

2. [**セットアップ**] および [**オブジェクトの編集**] オプションをクリックして、必要なフィールドを追加します。

3. 左側のナビゲーションから [**フィールド & リレーションシップ**を選択する]

   :::image type="content" source="images/salesforce/fields1.png" alt-text="Fields":::

4. **フィールド & リレーションシップ**テーブルに次のフィールドを追加します。

   |**フィールドラベル**   |**フィールド名**|**データの種類**|**付ける**|
   |---------------------|:-------------------|:--------------|:----------------|
   |Audit| Audit__c|長いテキスト領域 (100000) (表示されている4行目)||
   |Microsoft ではどのように役立つでしょうか。|How_can_Microsoft_help_c|ピック|
   |製品|Products_c|テキスト (255)||
   |Referral | Referral_Identfier_c|テキスト (100) (外部 ID)|はい|
   |紹介リンク| Referral_Link_c_|URL (255)||
   |パートナーセンターとの同期|sync_with_partner_center_c|Checkbox (既定値はオフ)||

   * 候補リストの値:

   - ワークロード固有の価値提案
   - お客様のテクニカルアーキテクチャ
   - 概念実証またはデモ
   - 引用符またはライセンス
   - 販売後の顧客の成功
   - 全般またはその他

5. フィールドは、[**フィールド & リレーションシップ**] の下に作成されます。

   :::image type="content" source="images/salesforce/fields2.png" alt-text="作成されたフィールド":::

6. 営業案件のレイアウトでは、上記のフィールドと同じセクションを作成します。

   - このセクションは、営業案件のレイアウトで販売元に提供されている必要があります。

   :::image type="content" source="images/salesforce/pc-fields-layout.png" alt-text="パートナーセンターのフィールドレイアウト":::

## <a name="end-to-end-bi-directional-co-sell-referral-synchronization"></a>エンドツーエンドの双方向の共同販売参照の同期

パワー自動化ソリューションをインストールし、構成し、カスタマイズしたら、Salesforce CRM とパートナーセンター間の共同販売参照の同期をテストできます。

### <a name="pre-requisites"></a>前提条件

パートナーセンターと Salesforce CRM 間で推薦を同期するには、Power 区別のソリューションで、Microsoft 固有の紹介フィールドを明確にする必要があります。 この id により、販売者チームは、共同販売のために Microsoft と共有する参照を決定することができます。

Salesforce CRM ソリューションの**営業案件**エンティティのパートナーセンターの紹介同期の一部として、一連のカスタムフィールドを使用できます。 CRM 管理者ユーザーは、**営業案件**のカスタムフィールドを使用して、別の crm セクションを作成する必要があります。

次のカスタムフィールドは、CRM セクションの一部にする必要があります。

- **パートナーセンターとの同期**: 営業案件を Microsoft パートナーセンターと同期するかどうか

- **参照識別子**: Microsoft パートナーセンターの紹介の読み取り専用識別子フィールド

- **紹介リンク**: Microsoft パートナーセンターでの紹介への読み取り専用リンク

- Microsoft**ヘルプ**を参照してください。

- **製品**: この営業案件に関連付けられている製品の一覧

- **監査**: パートナーセンターの紹介と同期するための読み取り専用の監査証跡

### <a name="scenarios"></a>モデル

1. CRM で参照が作成または更新され、パートナーセンターで同期される場合の参照の同期:

   1. CRM の**営業案件**セクションで可視性を持つユーザーを使用して、Salesforce crm 環境にサインインします。

   2. Salesforce CRM 環境で "新しい営業案件" を作成するときに、次のセクションが存在することを確認します。

      :::image type="content" source="images/salesforce/salesforce-scenario-1.png" alt-text="Salesforce 環境":::

   3. この機会を Microsoft パートナーセンターと同期するには、カードビューで次のフィールドを設定していることを確認します。

       - "パートナーセンターとの同期": はい
       - 「Microsoft がどのように役立つか」: 次のオプションから選択してください。
       - 製品: 製品のソリューション Id

   4. [営業案件**とパートナーセンターの同期**] オプションを **[はい]** に設定したら、10分待ってから、パートナーセンターアカウントにサインインします。 参照は、Salesforce CRM と同期されます。

   5. [パートナーセンターとの同期] オプションが [はい] に設定されている場合、Salesforce CRM で営業案件を更新すると、変更がパートナーセンターアカウントと同期されます。

   6. パートナーセンターで正常に同期された営業案件は、Salesforce CRM の✔アイコンで識別されます。

2. Microsoft パートナーセンターで参照が作成または更新され、Salesforce CRM 環境で同期される場合の紹介の同期:

    1. パートナーセンターの[ダッシュボード](https://partner.microsoft.com/dashboard/home)にサインインします。

    2. 左側のメニューから [**紹介**] を選択します。

    3. [新しい取引] オプションをクリックして、パートナーセンターから新しい共同販売紹介を作成します。

    4. Salesforce CRM 環境にサインインします。

    5. **[Open opportunity**] に移動します。 Microsoft パートナーセンターで作成された紹介が、Salesforce CRM で同期されるようになりました。

       :::image type="content" source="images/salesforce/salesforce-casino-e.png" alt-text="Salesforce の営業案件画面":::

    6. 同期された参照を選択すると、カードビューの詳細が設定されます。

## <a name="next-steps"></a>次のステップ

- [Microsoft Power の自動化プラットフォームの詳細](https://docs.microsoft.com/-automate/)

- [見込み客を管理する](manage-leads.md)

- [共同販売の機会を管理する](manage-co-sell-opportunities.md)

- [パートナー センター Webhook](https://docs.microsoft.com/partner-center/develop/partner-center-webhooks)